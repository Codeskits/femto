!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Cube3D=e()}(this,function(){"use strict";function t(t,e){Object.keys(e).forEach(function(s){t.style[s]=e[s]})}function e(t){setTimeout(function(){return t()},1e3/60)}function s(t,e){return Math.floor(Math.random()*(e-t+1))+t}var i=function(t,e){this.slider=t,this.settings=e};return i.prototype.init=function(){var t=this;this.fragment=document.createDocumentFragment();var e=document.createElement("div");e.classList.add("animation-3d"),e.insertAdjacentHTML("afterbegin",('<div class="cube">\n       '+'<div class="cube-face"></div>'.repeat(6)+"\n     </div>").repeat(this.settings.slicesCount)),this.fragment.appendChild(e),this.slider.el.appendChild(this.fragment),this.initMode(this.settings.mode3D),this.slider.slides.forEach(function(e){e.style.backgroundPosition=t.settings.isVertical?"left center":"center top"})},i.prototype.initMode=function(t){switch(t){case 1:this.settings.isVertical=!0,this.settings.rotateAxis="X",this.settings.rotateDegree=90;break;case 2:this.settings.isVertical=!0,this.settings.rotateAxis="X",this.settings.rotateDegree=180;break;case 3:this.settings.isVertical=!1,this.settings.rotateAxis="X",this.settings.rotateDegree=90;break;case 4:this.settings.isVertical=!1,this.settings.rotateAxis="X",this.settings.rotateDegree=180;break;case 5:this.settings.isVertical=!1,this.settings.rotateAxis="Y",this.settings.rotateDegree=180;break;case"random":this.initMode(s(0,5));break;default:this.settings.isVertical=!0,this.settings.rotateAxis="X",this.settings.rotateDegree=90}},i.prototype.updateSlide=function(t){var s=this,i=this.styleCubes(this.slider.imagesSrc[this.slider.slides.indexOf(this.slider.activeSlide)],this.slider.imagesSrc[t]),r=this.slider.el.querySelector(".animation-3d");r.style.display="block",this.slider.el.style.overflow="visible",this.slider.activeSlide.classList.remove("is-active"),this.slider.activeSlide.style.display="none",e(function(){i.forEach(function(t,e){setTimeout(function(){t.style.transform=s.getCubesModeTransform()},100*(e+1))})}),setTimeout(function(){r.style.display="none",s.slider.el.style.overflow="hidden",s.slider.slides[t].style.display="block",s.slider.slides[t].classList.add("is-active"),s.slider.activeSlide=s.slider.slides[t],s.slider.updating=!1},100*this.settings.slicesCount+600)},i.prototype.getCubesModeTransform=function(){var t=this.settings.isVertical?this.slider.sliderHeight/2:this.slider.sliderHeight/this.settings.slicesCount/2,e="Y"===this.settings.rotateAxis.toUpperCase()?"Y":"X";switch(this.settings.rotateDegree){case 90:return"translate3d(0, 0, -"+t+"px) rotate"+e+"(-90deg)";case 180:return"translate3d(0, 0, -"+t+"px) rotate"+e+"(180deg)";default:return"translate3d(0, 0, -"+t+"px) rotateX(-90deg)"}},i.prototype.setImagesSrc=function(t,e,s){switch(this.settings.rotateDegree){case 90:t[0].backgroundImage="url("+e+")",t[1].backgroundImage="url("+s+")";break;case 180:t[0].backgroundImage="url("+e+")",t[2].backgroundImage="url("+s+")";break;default:t[0].backgroundImage="url("+e+")",t[1].backgroundImage="url("+s+")"}return t},i.prototype.styleCubes=function(e,s){var i=this,r=Math.ceil(this.settings.slicesCount/2),a=Array.from(this.slider.el.querySelectorAll(".cube")),n=this.slider.sliderHeight,o=this.slider.sliderWidth,d=this.settings.slicesCount,l=this.slider.sliderHeight/2,h=this.slider.sliderWidth/this.settings.slicesCount,c=this.slider.sliderHeight/this.settings.slicesCount,g=new Image,u=new Image;g.src=e,u.src=s;var f=this.slider.sliderWidth/g.width*g.height,p=this.slider.sliderWidth/u.width*u.height,m=this.settings.isVertical?[{transform:"translate3d(0, 0, "+l+"px) rotateY(0)",backgroundSize:f>this.slider.sliderHeight?100*d+"% auto":"auto 100%"},{transform:"translate3d(0, -50%, 0) rotateX(90deg)",backgroundSize:p>this.slider.sliderHeight?100*d+"% auto":"auto 100%"},{transform:"Y"===this.settings.rotateAxis?"translate3d(0, 0, -"+l+"px) scaleX(-1)":"translate3d(0, 0, -"+l+"px) rotateX(180deg)",backgroundSize:p>this.slider.sliderHeight?100*d+"% auto":"auto 100%"},{transform:"translate3d(0, 50%, 0) rotateX(90deg)",backgroundSize:p>this.slider.sliderHeight?100*d+"% auto":"auto 100%"},{width:n+"px",transform:"translate3d(-50%, 0, 0) rotateY(90deg)"},{width:n+"px",transform:"translate3d(calc("+h+"px - 50%), 0, 0) rotateY(90deg)"}]:[{transform:"translate3d(0, 0, "+c/2+"px) rotateY(0)",backgroundSize:f>this.slider.sliderHeight?"100% auto":"auto "+100*d+"%"},{transform:"translate3d(0, -50%, 0) rotateX(90deg)",backgroundSize:p>this.slider.sliderHeight?"100% auto":"auto "+100*d+"%"},{transform:"Y"===this.settings.rotateAxis?"translate3d(0, 0, -"+c/2+"px) scaleX(-1)":"translate3d(0, 0, -"+c/2+"px) rotateX(180deg)",backgroundSize:p>this.slider.sliderHeight?"100% auto":"auto "+100*d+"%"},{transform:"translate3d(0, 50%, 0) rotateX(90deg)",backgroundSize:p>this.slider.sliderHeight?"100% auto":"auto "+100*d+"%"},{width:c+"px",transform:"translate3d(-50%, 0, 0) rotateY(90deg)",backgroundSize:p>this.slider.sliderHeight?"100% auto":"auto "+100*d+"%"},{width:c+"px",transform:"translate3d(calc("+o+"px - 50%), 0, 0) rotateY(90deg)",backgroundSize:p>this.slider.sliderHeight?"100% auto":"auto "+100*d+"%"}];return m=this.setImagesSrc(m,e,s),a.forEach(function(e,s){var a=i.settings.isVertical?{top:0,left:100/d*s+"%",width:100/d+"%",height:"100%",zIndex:s<r?10*(s+1):10*(d-s),transform:"translate3d(0, 0, -"+l+"px) rotateX(0deg) rotateY(0deg)",backgroundPosition:s*-h+"px center"}:{top:100/d*s+"%",left:0,width:"100%",height:100/d+"%",zIndex:s<r?10*(s+1):10*(d-s),transform:"translate3d(0, 0, -"+c/2+"px) rotateX(0deg) rotateY(0deg)",backgroundPosition:" center "+s*-c+"px"};t(e,a),Array.from(e.querySelectorAll(".cube-face")).forEach(function(e,s){t(e,m[s])})}),a},i});